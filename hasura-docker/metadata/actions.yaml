actions:
  - name: checkoutDomain
    definition:
      kind: synchronous
      handler: '{{ACTIONS_URL_BASE}}/checkoutDomain'
      forward_client_headers: true
      headers:
        - name: Hasura-Action-Secret
          value_from_env: HASURA_ACTION_SECRET
    permissions:
      - role: user
      - role: manager
    comment: Attempt to checkout a domain for a project
  - name: checkoutServer
    definition:
      kind: synchronous
      handler: '{{ACTIONS_URL_BASE}}/checkoutServer'
      forward_client_headers: true
      headers:
        - name: Hasura-Action-Secret
          value_from_env: HASURA_ACTION_SECRET
    permissions:
      - role: user
      - role: manager
    comment: Attempt to checkout a server for a project
  - name: delete_domainCheckout
    definition:
      kind: synchronous
      handler: '{{ACTIONS_URL_BASE}}/deleteDomainCheckout'
      forward_client_headers: true
      headers:
        - name: Hasura-Action-Secret
          value_from_env: HASURA_ACTION_SECRET
    permissions:
      - role: user
      - role: manager
    comment: Delete the specified domain checkout and release the domain if deleted entry was the latest checkout
  - name: delete_evidence
    definition:
      kind: synchronous
      handler: '{{ACTIONS_URL_BASE}}/deleteEvidence'
      forward_client_headers: true
      headers:
        - name: Hasura-Action-Secret
          value_from_env: HASURA_ACTION_SECRET
    permissions:
      - role: user
      - role: manager
    comment: Delete the specified evidence file and remove the associated file from the filesystem
  - name: delete_serverCheckout
    definition:
      kind: synchronous
      handler: '{{ACTIONS_URL_BASE}}/deleteServerCheckout'
      headers:
        - name: Hasura-Action-Secret
          value_from_env: HASURA_ACTION_SECRET
    permissions:
      - role: user
      - role: manager
    comment: Delete the specified server checkout and release the server if deleted entry was the latest checkout
  - name: delete_template
    definition:
      kind: synchronous
      handler: '{{ACTIONS_URL_BASE}}/deleteTemplate'
      forward_client_headers: true
      headers:
        - name: Hasura-Action-Secret
          value_from_env: HASURA_ACTION_SECRET
    permissions:
      - role: user
      - role: manager
    comment: Delete the specified template file and remove the associated file from the filesystem
  - name: generateReport
    definition:
      kind: synchronous
      handler: '{{ACTIONS_URL_BASE}}/generateReport'
      forward_client_headers: true
      headers:
        - name: Hasura-Action-Secret
          value_from_env: HASURA_ACTION_SECRET
    permissions:
      - role: user
      - role: manager
    comment: Generate a JSON report for the given report ID
  - name: login
    definition:
      kind: synchronous
      handler: '{{ACTIONS_URL_BASE}}/login'
      headers:
        - name: Hasura-Action-Secret
          value_from_env: HASURA_ACTION_SECRET
    permissions:
      - role: manager
      - role: restricted
      - role: user
      - role: public
  - name: whoami
    definition:
      kind: ""
      handler: '{{ACTIONS_URL_BASE}}/whoami'
      forward_client_headers: true
      headers:
        - name: Hasura-Action-Secret
          value_from_env: HASURA_ACTION_SECRET
    permissions:
      - role: user
      - role: restricted
      - role: manager
    comment: User `whoami` query for JWT
custom_types:
  enums: []
  input_objects: []
  objects:
    - name: LoginResponse
    - name: WhoamiOutput
    - name: ReportResponse
    - name: checkoutResponse
    - name: deleteResponse
  scalars: []
